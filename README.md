# Лабораторная работа 6
Для решения понадобится GnuPG и eCryptfs. На Linux данные программные обеспечения уже имеются. На другие ОС придётся их установить. 

## Тестовые задания
***В этом разделе будет представлена теория и практика с пошаговыми объяснениями.***
### Шифрование файлов
Здесь мы будем использовать симметричное шифрование, также известное как шифрование с закрытым ключом. Оно является самым простым и в то же время надёжным способом шифрования файлов. 

Создадим пустой файл и запишем в него какую-нибудь информацию (что угодно).
```bash
cat > file.txt
```
Введём следующую команду:
```bash
gpg -c file.txt
```
Далее нужно будет ввести фразу-пароль, которая и будет являться ключом. 

Теперь пробуем открыть файл с помощью `gedit` и убеждаемся, что теперь мы абсолютно не понимаем, что в нём написано.

Расшифруем этот файл:
```bash
gpg --decrypt file.txt.gpg
```
В терминале должен отобразиться текст файла.
### Шифрование каталогов
Для начала нам нужно установить userspace-инструменты необходимые для шифрования.
```bash
sudo apt-get install ecryptfs-utils
```
Затем нужно создать каталог и смонтировать его.
```bash
sudo mkdir /home/user/example
sudo mount -t ecryptfs /home/user/example home/user/example
```
Далее нам предложат выбрать тип ключа для шифрования, стандарт шифрования, размер ключа и спросят, будем ли мы разрешать доступ к незашифрованным файлам и шифровать имена файлов. 
Выберем `passphrase`, а всё прочее оставим по умолчанию, нажимая enter. 
В конце, при выборе yes/no, введём везде yes. 

Мы успешно зашифровали каталог. Остается проверить работу шифрования. 
Перейдем в папку и создадим в нём какой-нибудь файл с текстом вот так:
```bash
sudo nano file.txt
```
>При использовании известной нам `cat` будет отказано в доступе, а при `touch` потребуется ввести пароль пользователя.

Теперь демонтируем eCryptfs при помощи следующей команды:
```bash
sudo umount /home/user/example
```
При открытии файла нас встретит надпись о том, что у нас нет разрешения на открытие файла, а всё содержимое в нём будет зашифровано.
## Задание для самостоятельного выполнения
Требуется автоматизировать процесс шифрования файлов в каталоге с использованием GPG или eCryptfs (выбрать что-то одно).

+ Создайте каталог и добавьте в него несколько текстовых файлов.
+ Напишите bash-скрипт, который автоматически зашифрует все .txt файлы в каталоге.
+ Скрипт должен сохранять зашифрованные файлы в каком-нибудь определённом каталоге.

После шифрования проверьте доступность файлов, а потом дешифруйте их и проверьте целостность данных (после дешифровки файлы должны быть такими же, как и до шифрования).

## Как успешно сдать работу?
Создать свой репозиторий из шаблона этого. Как это делается - "Use this template" -> "Create a new repository" и сделайте его public.

Находясь уже в своем репозитории - создайте новый файл формата .md и там оформляйте отчет. В отчете опишите все шаги которые вы делали, чтобы получить финальный результат работы.

Что вам нужно знать, чтобы успешно защитить работу:

Виды шифрования, что такое eCryptfs и GPG и как они работают, как работать с зашифрованными файлами и каталогами.
## Источники
[Источник, где можно найти всё.](www.google.com)
